<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur Script GitHub Pages</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background-color: #f4f4f4; color: #333; }
        .container { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input[type="text"] { width: calc(100% - 22px); padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px; }
        button { background-color: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 20px; }
        button:hover { background-color: #0056b3; }
        .output-section { margin-top: 30px; padding: 15px; background-color: #e9ecef; border-radius: 4px; }
        .output-section h3 { margin-top: 0; color: #007bff; }
        pre { background-color: #333; color: #f0f0f0; padding: 15px; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; font-family: monospace; }
        .instructions ol { padding-left: 20px; }
        .instructions li { margin-bottom: 8px; }
        .copy-btn { margin-left: 10px; padding: 5px 8px; font-size: 0.8em; cursor: pointer;}
    </style>
</head>
<body>
    <div class="container">
        <h1>Générateur de Script pour Déploiement GitHub Pages</h1>

        <label for="localPath">Chemin complet du dossier local de votre projet :</label>
        <input type="text" id="localPath" placeholder="/Users/votreNom/Documents/MonProjet">

        <label for="repoName">Nom du dépôt sur GitHub (ex: mon-projet-cool):</label>
        <input type="text" id="repoName" placeholder="mon-projet-cool">

        <label for="githubUser">Votre nom d'utilisateur GitHub :</label>
        <input type="text" id="githubUser" placeholder="VotreLoginGitHub">
        
        <label for="commitMessage">Message pour le premier commit :</label>
        <input type="text" id="commitMessage" value="Commit initial du projet">

        <button onclick="generateScript()">Générer le Script et les Instructions</button>

        <div id="output" style="display:none;">
            <div class="output-section instructions">
                <h3>Partie 1 : Sur GitHub.com</h3>
                <ol>
                    <li>Allez sur <a href="https://github.com/new" target="_blank">https://github.com/new</a>.</li>
                    <li><strong>Repository name :</strong> Entrez "<span id="ghRepoName1"></span>".</li>
                    <li>Assurez-vous que "Public" est sélectionné.</li>
                    <li><span style="color:red; font-weight:bold;">NE COCHEZ PAS</span> "Initialize this repository with a README".</li>
                    <li>Cliquez sur "Create repository".</li>
                    <li>Sur la page suivante du dépôt, copiez l'URL HTTPS (elle ressemblera à <code>https://github.com/<span id="ghUser1"></span>/<span id="ghRepoName2"></span>.git</code>). Vous en aurez besoin pour le script terminal.</li>
                </ol>
            </div>

            <div class="output-section">
                <h3>Partie 2 : Commandes pour votre Terminal <button class="copy-btn" onclick="copyToClipboard('terminalCommands')">Copier</button></h3>
                <pre id="terminalCommands"></pre>
            </div>

            <div class="output-section instructions">
                <h3>Partie 3 : Sur GitHub.com (après le push)</h3>
                <ol>
                    <li>Retournez à votre dépôt "<span id="ghRepoName3"></span>" sur GitHub.</li>
                    <li>Allez dans "Settings" > "Pages".</li>
                    <li>Sous "Build and deployment" > "Source", sélectionnez "Deploy from a branch".</li>
                    <li>Branche : sélectionnez <strong><code>main</code></strong>, Dossier : sélectionnez <strong><code>/(root)</code></strong>.</li>
                    <li>Cliquez sur "Save".</li>
                    <li>Attendez quelques minutes, puis rafraîchissez. L'URL de votre site apparaîtra.</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        function generateScript() {
            const localPath = document.getElementById('localPath').value.trim();
            const repoName = document.getElementById('repoName').value.trim();
            const githubUser = document.getElementById('githubUser').value.trim();
            const commitMessage = document.getElementById('commitMessage').value.trim();

            if (!localPath || !repoName || !githubUser || !commitMessage) {
                alert("Veuillez remplir tous les champs !");
                return;
            }

            const githubRepoUrl = `https://github.com/${githubUser}/${repoName}.git`;

            document.getElementById('ghRepoName1').textContent = repoName;
            document.getElementById('ghUser1').textContent = githubUser;
            document.getElementById('ghRepoName2').textContent = repoName;
            document.getElementById('ghRepoName3').textContent = repoName;
            
            const scriptContent = `
# Naviguez vers votre dossier de projet
cd "${localPath}"

# Initialiser Git (si pas déjà fait)
git init

# (Optionnel) Renommer la branche en 'main' si elle s'appelle 'master'
# Vérifiez d'abord le nom de votre branche actuelle avec: git branch
# Si elle est 'master', exécutez:
# git branch -m master main

# Ajouter tous les fichiers
git add .

# Faire le premier commit
git commit -m "${commitMessage}"

# Lier au dépôt distant sur GitHub (COLLEZ L'URL HTTPS DE VOTRE DÉPÔT ICI SI DIFFÉRENTE)
git remote add origin ${githubRepoUrl}
# Si 'origin' existe déjà et pointe vers un autre dépôt, vous devrez peut-être le supprimer d'abord:
# git remote remove origin 
# puis ré-exécutez la commande git remote add origin ... ci-dessus.

# Envoyer les fichiers vers GitHub
git push -u origin main
# Quand demandé:
# Username: ${githubUser}
# Password: VOTRE_PERSONAL_ACCESS_TOKEN (PAT)
            `;

            document.getElementById('terminalCommands').textContent = scriptContent.trim();
            document.getElementById('output').style.display = 'block';
        }

        function copyToClipboard(elementId) {
            const textToCopy = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(textToCopy).then(function() {
                alert('Commandes copiées dans le presse-papiers !');
            }, function(err) {
                alert('Erreur lors de la copie. Veuillez copier manuellement.');
                console.error('Erreur copie: ', err);
            });
        }
    </script>
</body>
</html>